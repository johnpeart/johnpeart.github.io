<head>

    {%- if env.ELEVENTY_RUN_MODE == "serve" -%}
        {%- assign siteUrl = "http://localhost:8080" -%}
    {%- else -%}
        {%- assign siteUrl = site.url -%}
    {%- endif -%}
    
	{%- assign pageUrl = siteUrl | append: page.url | replace: 'index.html','' %}

    {% comment %}
        These `includes` set the {{ title }} and {{ description }}
        variable for each page, based on the layout and/or collection of that page.
    {% endcomment %}
    {%- include 'components/head/title.html' -%}
    {%- include 'components/head/description.html' -%}
    
    {% comment %}
        These `includes` set the {{ ogType }} / og:type variable for each page, 
        based on the layout collection of that page.
    {% endcomment %}
    {%- include 'components/head/og-type.html' -%}
    
    {% comment %}
        These `includes` set the {{ og[variable] }} variables that are used to generate
        social images for each page. Templates are at /opengraph/{{ layout }}.
    {% endcomment %}
    {%- include 'components/head/og-layout.html' -%}
    {%- include 'components/head/og-image.html' -%}
    {%- include 'components/head/og-object.html' -%}
    {%- include 'components/head/og-params.html' -%}
    
    {% comment %}
        Trim the variables
    {% endcomment %}
    {%- assign title = title | strip_html | truncate: 200 -%}
    {%- assign description = description | strip_html | truncate: 200 -%}
    
    <!-- Hot load -->
    <link rel="preconnect" href="{{ siteUrl }}" />
	<link rel="preload" as="style" href="{{ siteUrl | append: '/styles/styles.css' }}">
    
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

	<title>{{ title }}</title>
	<meta name="description" content="{{ description }}">
	<meta name="author" content="John Peart">

	<!-- Base URLS, duplicate URLs and feeds -->
	<meta name="url" content="{{ siteUrl }}">
	<base href="{{ pageUrl }}">
	<!-- Links to top level resource in an hierarchical structure -->
	<link rel="index" href="{{ siteUrl }}">
	<link rel="canonical" href="{{ pageUrl }}">
	<!-- RSS -->
	{%- for feed in collections.feed %}
	<link rel="alternate" href="{{ siteUrl | append: feed.data.permalink }}" type="application/rss+xml" title="{{ "John Peart â€¢ " | append: feed.data.title }}">
	{%- endfor %}
	<!-- Links to a document that describes a collection of records, documents, or other materials of historical interest. -->
	<link rel="archives" href="{{ siteUrl | append: '/archives' }}">

	<!-- Gives information about the author -->
	<link rel="me" href="{{ siteUrl }}" type="text/html">
	<link rel="me" href="{{ site.linkedin.url }}" type="text/html">
	<link rel="me" href="{{ site.github.url }}" type="text/html">
	<link rel="me" href="{{ site.mastodon.url }}" type="text/html">
    <meta name="fediverse:creator" content="{{ site.mastodon.handle }}">
	<link rel="me" href="{{ site.bluesky.url }}" type="text/html">
	<link href="{{ site.gravatar.url }}" rel="me">
    
	<!-- Web mentions -->
	{%- if site.webmentions %}
	<link rel="dns-prefetch" href="https://webmention.io">
	<link rel="preconnect" href="https://webmention.io">
	<link rel="preconnect" href="ws://webmention.io:8080">
    <link rel="pingback" href="https://webmention.io/webmention?forward=https://{{ site.webmentions.username }}" />
	<link rel="pingback" href="https://webmention.io/{{ site.webmentions.username }}/xmlrpc">
	<link rel="webmention" href="https://webmention.io/{{ site.webmentions.username }}/webmention">
	{%- endif %}

    <!-- Schema.org settings -->
    <meta itemprop="name" content="{{ title }}">
    <meta itemprop="description" content="{{ description }}">
    <meta itemprop="image" content="{{ ogImageURL }}">
    
    <!-- Facebook Open Graph settings -->
    <meta property="og:url" content="{{ pageUrl }}">
    <meta property="og:type" content="{{ ogType }}">
	<meta property="og:title" content="{{ title }}">
	<meta property="og:description" content="{{ description }}">
	<meta property="og:image" content="{{ ogImageURL }}">
    <meta property="og:site_name" content="John Peart">
    <meta property="og:locale" content="en_GB">
    <meta property="article:author" content="John Peart">
    <meta property="article:publisher" content="John Peart">

    <!-- Build info -->
    <meta name="generator" content="{{ eleventy.generator }}">
    
    <!-- Standard favicons -->
    <link rel="icon" href="{{ siteUrl }}/images/site/favicon.svg" type="image/svg+xml">
    <link rel="icon" href="{{ siteUrl }}/images/site/favicon-large-png.png" type="image/png">
    <link rel="icon" href="{{ siteUrl }}/images/site/favicon.ico" type="image/x-icon">
    
    <!-- Apple iOS -->
    <link rel="apple-touch-icon" href="{{ siteUrl }}/images/site/favicon-large-png.png">
    
    <!-- Safari pinned tab -->
    <link rel="mask-icon" href="{{ siteUrl }}/images/site/favicon-pinned-svg.svg" color="#5bbad5">

	<!-- Safari toolbar colors -->
	<meta name="theme-color" content="#fafafa" media="(prefers-color-scheme: light)">
	<meta name="theme-color" content="#141619" media="(prefers-color-scheme: dark)">

	<!-- CSS -->
	<link rel="stylesheet" href="{{ siteUrl | append: '/styles/styles.css' }}">
	
</head>